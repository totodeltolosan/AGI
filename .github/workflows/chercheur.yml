name: "ðŸ” GÃ©nÃ©ral Le Chercheur - Recherche Solution"

on:
  repository_dispatch:
    types: [chercher-solution]

jobs:
  chercheur-solution:
    name: "ðŸ” Recherche et Communication Solution"
    runs-on: ubuntu-latest
    
    steps:
      - name: "ðŸ“ TÃ©lÃ©chargement du code source"
        uses: actions/checkout@v4

      - name: "ðŸ Configuration Python 3.11"
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: "ðŸ” ExÃ©cution du ContremaÃ®tre Chercheur"
        run: |
          echo "ðŸŽ¯ === GÃ‰NÃ‰RAL LE CHERCHEUR ==="
          echo "Type d'Ã©vÃ©nement: ${{ github.event.action }}"
          echo "Payload reÃ§u: ${{ toJson(github.event.client_payload) }}"
          echo ""
          
          # ExÃ©cution du script ContremaÃ®tre
          python .github/scripts/chercheur_solution.py \
            --payload '${{ toJson(github.event.client_payload) }}'

      - name: "ðŸ“Š Publication du rÃ©sumÃ© de recherche"
        if: always()
        run: |
          echo "## ðŸ” Recherche de Solution - RÃ©sultats" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Type de problÃ¨me :** ${{ github.event.client_payload.type_probleme || 'Non spÃ©cifiÃ©' }}" >> $GITHUB_STEP_SUMMARY
          echo "**Ã‰vÃ©nement dÃ©clenchÃ© :** ${{ github.event.action }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "âœ… **Recherche terminÃ©e** - Solution proposÃ©e et communiquÃ©e" >> $GITHUB_STEP_SUMMARY
